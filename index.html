<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Web ƒê√°nh Gi√° Checklist</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
</head>
<body>
  <div class="container">
    <h2>ƒê√°nh Gi√° Checklist C√° Nh√¢n</h2>
    <div class="bars">
      <div class="bar"><span>Energy ‚ö°</span><div class="fill" id="energyBar"></div></div>
      <div class="bar"><span>Mood üòä</span><div class="fill" id="moodBar"></div></div>
      <div class="bar"><span>Aura ‚ú®</span><div class="fill" id="auraBar"></div></div>
    </div>

    <label for="category">Ch·ªçn nh√≥m checklist:</label>
    <select id="category" multiple></select>

    <canvas id="compareChart" class="hidden"></canvas>
    <div id="progressContainer" class="progress hidden"><div id="progressBar"></div></div>

    <div class="actions">
      <input type="text" id="datePicker" class="date-picker" readonly />
      <button class="action-btn" onclick="triggerImport()">Nh·∫≠p d·ªØ li·ªáu</button>
      <input type="file" id="import-file" accept=".json" class="hidden" />
      <button class="action-btn" onclick="undoChange()">Ho√†n t√°c</button>
    </div>

    <h3 id="checklist-title"></h3>
    <div class="result checklist-summary">
      <div><strong>ƒê√£ ho√†n th√†nh:</strong> <span id="count">0</span>/<span id="total">0</span></div>
    </div>
    <form id="checklist-form"></form>

    <div style="text-align:right; margin: 10px 0 0 0;">
      <button id="viewHistoryBtn" type="button" class="history-btn">üìÜ Xem l·ªãch s·ª≠</button>
    </div>

    <!-- Modal popup l·ªãch s·ª≠ -->
    <div id="historyModal" class="modal hidden">
      <div id="historyModalContent" class="modal-content">
        <button id="closeHistoryModal" class="close-btn">&times;</button>
        <h2>L·ªãch s·ª≠ Checklist</h2>
        <canvas id="historyChart"></canvas>

        <div>
          <label for="flowScale"><b>Ch·∫ø ƒë·ªô hi·ªÉn th·ªã:</b></label>
          <select id="flowScale">
            <option value="daily" selected>Daily</option>
            <option value="weekly">Weekly</option>
            <option value="monthly">Monthly</option>
          </select>
        </div>

        <div>
          <label for="chartType"><b>Lo·∫°i bi·ªÉu ƒë·ªì:</b></label>
          <select id="chartType">
            <option value="line" selected>Line</option>
            <option value="radar">Radar</option>
            <option value="bar">Stacked Bar</option>
          </select>
        </div>

        <div id="layerToggleBox">
          <label><input type="checkbox" id="toggleEnergy" checked> ‚ö° Energy</label>
          <label><input type="checkbox" id="toggleMood" checked> üòä Mood</label>
          <label><input type="checkbox" id="toggleAura" checked> ‚ú® Aura</label>
        </div>

        <canvas id="emotionFlowChart"></canvas>
        <div id="historyHighlight"></div>

        <table id="historyTable">
          <thead>
            <tr><th>Ng√†y</th><th>ƒê√£ tick</th><th>Chi ti·∫øt</th><th>‚ùå</th></tr>
          </thead>
          <tbody></tbody>
        </table>

        <div class="export-buttons">
          <button id="exportCSVBtn" type="button">‚¨á Xu·∫•t CSV</button>
          <button id="exportXLSXBtn" type="button">‚¨á Xu·∫•t Excel</button>
          <span id="exportMsg"></span>
        </div>
      </div>
    </div>

    <div id="chainHighlightBox" class="chain-highlight"></div>
    <div id="snippet" class="snippet"></div>

    <div id="motivationBox" style="display:none;">
      <span id="motivation"></span>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
