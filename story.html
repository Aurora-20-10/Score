<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Checklist Story Mode</title>
<style>
body {font-family: Arial, sans-serif;background:#f5f8fa;padding:20px;}
.bars {display:flex;gap:10px;margin-bottom:20px;}
.bar{flex:1;background:#ddd;border-radius:6px;overflow:hidden;position:relative;height:20px;}
.bar span{position:absolute;left:8px;top:0;font-size:12px;color:#000;line-height:20px;z-index:2;}
.bar .fill{height:100%;width:50%;transition:width 0.3s;}
#energyBar{background:#FFD700;}
#moodBar{background:#4DB6E2;}
#auraBar{background:#B388EB;}
#checklist label{display:block;margin:6px 0;padding:4px;border-radius:4px;cursor:pointer;transition:background 0.2s;}
#checklist label:hover{background:#f0f0f0;}
#checklist label.checked{background:#e0ffe0;color:#006400;text-decoration:line-through;}
.snippet{margin-top:15px;font-style:italic;color:#555;min-height:20px;transition:opacity 0.4s;opacity:1;}
.modal{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.4);}
.modal.hidden{display:none;}
.modal-content{background:#fff;padding:20px;border-radius:8px;text-align:center;max-width:300px;}
.modal .icon{font-size:32px;margin-bottom:10px;}
</style>
</head>
<body>
<div class="bars">
  <div class="bar"><span>Energy âš¡</span><div class="fill" id="energyBar"></div></div>
  <div class="bar"><span>Mood ğŸ˜Š</span><div class="fill" id="moodBar"></div></div>
  <div class="bar"><span>Aura âœ¨</span><div class="fill" id="auraBar"></div></div>
</div>
<label>NhÃ³m:
<select id="groupSelect">
<option value="">--Chá»n nhÃ³m--</option>
<option value="chamCoThe">1. ğŸ‹ï¸ ChÄƒm CÆ¡ Thá»ƒ</option>
<option value="chamNhaCua">2. ğŸ  ChÄƒm NhÃ  Cá»­a</option>
<option value="dinhDuong">3. ğŸ Dinh DÆ°á»¡ng â€“ áº¨m Thá»±c</option>
<option value="langPhi">4. ğŸ’° Kiá»ƒm SoÃ¡t LÃ£ng PhÃ­</option>
<option value="aura">5. âœ¨ NÃ¢ng Táº§ng Aura</option>
<option value="soThich">6. ğŸ­ Sá»Ÿ ThÃ­ch â€“ DÆ°á»¡ng KhÃ­</option>
<option value="theDuc">7. ğŸƒ Thá»ƒ Dá»¥c â€“ CÆ¡ XÆ°Æ¡ng â€“ DÃ¡ng Form</option>
</select>
</label>
<div id="checklist"></div>
<div id="snippet" class="snippet"></div>
<div id="milestoneModal" class="modal hidden">
  <div class="modal-content">
    <div class="icon">ğŸ‰</div>
    <p id="milestoneText"></p>
    <button id="closeModal">ÄÃ³ng</button>
  </div>
</div>
<script>
(function(){
const checklistData = {
  chamCoThe: [
    "Uá»‘ng Ä‘á»§ 1.5 â€“ 2L nÆ°á»›c (chia 3 khung sÃ¡ng â€“ chiá»u â€“ tá»‘i)",
    "Rá»­a máº·t sÃ¡ng + tá»‘i",
    "Thoa lotion body (cá»• â€“ vai â€“ tay â€“ chÃ¢n)",
    "Cháº£i tÃ³c â€“ xá»‹t dÆ°á»¡ng áº©m ngá»n tÃ³c (náº¿u tÃ³c khÃ´)",
    "ÄÃ¡nh rÄƒng 2 láº§n/ngÃ y",
    "Táº©y trang / lau sáº¡ch máº·t náº¿u dÃ¹ng kem chá»‘ng náº¯ng hoáº·c Ä‘i ra ngoÃ i",
    "LÃ m sáº¡ch mÃ´i â€“ dÆ°á»¡ng mÃ´i",
    "Táº¯m nÆ°á»›c áº¥m buá»•i tá»‘i (xáº£ stress, reset da)",
    "DÆ°á»¡ng da body tá»‘i (náº¿u khÃ´ng má»‡t)",
    "KÃ©o giÃ£n chÃ¢n, gáº­p bá»¥ng nháº¹ 3â€“5 phÃºt (náº¿u ngá»“i lÃ¢u)"
  ],
  chamNhaCua: [
    "Xáº¿p chÄƒn gá»n sau khi ngá»§ dáº­y",
    "Rá»­a chÃ©n bÃ¡t trong ngÃ y (khÃ´ng Ä‘á»ƒ tá»“n qua Ä‘Ãªm)",
    "QuÃ©t nhÃ  hoáº·c lau chÃ¹i Ä‘iá»ƒm báº©n rÃµ rá»‡t",
    "KhÃ´ng Ä‘á»ƒ Ä‘á»“ lung tung dÆ°á»›i Ä‘áº¥t",
    "Dá»n Ä‘á»“ trÃªn bÃ n vá» Ä‘Ãºng gÃ³c / vá»‹ trÃ­",
    "Äá»• rÃ¡c (tá»‘i)"
  ],
  dinhDuong: [
    "1 cá»‘c nÆ°á»›c lá»c ngay sau khi ngá»§ dáº­y",
    "Uá»‘ng nÆ°á»›c 1.5â€“2L chia sÃ¡ng/chiá»u/tá»‘i",
    "2â€“3 bá»¯a chÃ­nh: Ä‘áº§y Ä‘á»§ carb tá»‘t + Ä‘áº¡m + rau",
    "1â€“2 bá»¯a phá»¥ nháº¹: sá»¯a háº¡t / trÃ¡i cÃ¢y / háº¡t mix",
    "1 bá»¯a cÃ³ rau xanh dáº¡ng lÃ¡ (giÃºp tiÃªu hÃ³a)",
    "1â€“2 bá»¯a cÃ³ trÃ¡i cÃ¢y tÆ°Æ¡i",
    "1 bá»¯a cÃ³ protein tráº¯ng (cÃ¡, gÃ , trá»©ng)",
    "TrÃ¡nh Ä‘á»ƒ quÃ¡ 6 tiáº¿ng khÃ´ng Äƒn",
    "KhÃ´ng Äƒn khuya sau 9h tá»‘i (trá»« khi táº­p náº·ng)"
  ],
  langPhi: [
    "HÃ´m nay cÃ³ bá»‹ rá»›t mode / tá»¥t khÃ­ khÃ´ng? (Náº¿u cÃ³, tá»± xá»­ chÆ°a?)",
    "CÃ³ Ä‘á»ƒ báº£n thÃ¢n trÃ¬ hoÃ£n 2 tiáº¿ng liÃªn tiáº¿p khÃ´ng lÃ½ do?",
    "Máº¡ng xÃ£ há»™i / Tiktok hÃ´m nay cÃ³ trÃ n quÃ¡ 30 phÃºt khÃ´ng?",
    "CÃ³ ngá»“i lÆ°á»›t kiá»ƒu vÃ´ thá»©c quÃ¡ 3 láº§n / ngÃ y khÃ´ng?",
    "CÃ³ bá»‹ kÃ©o vÃ o nhÃ³m chat / báº¡n bÃ¨ khÃ´ng thuá»™c vÃ²ng chiáº¿n lÆ°á»£c?",
    "CÃ³ Ä‘á»ƒ báº£n thÃ¢n lÃ m viá»‡c khi Ä‘Ã£ má»‡t / cáº¡n pin khÃ´ng? (Náº¿u cÃ³, cÃ³ nghá»‰ há»“i pin chÆ°a?)",
    "CÃ³ Äƒn uá»‘ng Ä‘Ãºng khung Ä‘á»ƒ giá»¯ ná»n nÄƒng lÆ°á»£ng chÆ°a?",
    "CÃ³ bá»‹ cuá»‘n vÃ o nhá»¯ng viá»‡c khÃ´ng cÃ³ giÃ¡ trá»‹ lÃ¢u dÃ i? (VÃ­ dá»¥: drama, thá»‹ phi, chuyá»‡n vÃ´ Ã­ch)",
    "CÃ³ tiÃªu hao thá»i gian vÃ¬ dá»n dáº¹p / sáº¯p xáº¿p khÃ´ng dá»©t Ä‘iá»ƒm?"
  ],
  aura: [
    "Thá»Ÿ sÃ¢u, vÆ°Æ¡n ngÆ°á»i â€” má»Ÿ lá»“ng ngá»±c 3â€“5 phÃºt",
    "DÃ nh 10â€“15 phÃºt á»Ÿ má»™t mÃ¬nh â€” khÃ´ng máº¡ng, khÃ´ng nÃ³i",
    "DÆ°á»¡ng da cá»• + vai (song song vá»›i dÆ°á»¡ng da máº·t)",
    "Ã thá»©c: giá»¯ máº·t tháº£ má»m, khÃ´ng cau â€” mÃ´i nháº¹ tá»± nhiÃªn",
    "NhÃ¬n gÆ°Æ¡ng 2 phÃºt/ngÃ y: máº¯t tá»‰nh â€” khÃ´ng gá»“ng",
    "Giá»ng nÃ³i: giá»¯ Ä‘á»u, má»m, khÃ´ng cá»™c",
    "Ä‚n uá»‘ng cháº­m rÃ£i â€” khÃ´ng nuá»‘t vá»™i",
    "Nghe nháº¡c táº§ng cao (nháº¡c chill â€“ nháº¡c ná»n Fantasy â€“ Nature Sound)"
  ],
  soThich: [
    "Xem mÃºa cá»• trang hoáº·c mÃºa vÃµ (10â€“30â€™)",
    "Nghe nháº¡c cá»¥ / sÃ¡o / Ä‘Ã n (10â€“40â€™)",
    "ThÆ°á»Ÿng mÃ¹i thÆ¡m tá»± nhiÃªn (tinh dáº§u / hoa / rÆ°á»£u trÃ¡i cÃ¢y)",
    "Ngáº¯m 1 hÃ¬nh má»¹ nhÃ¢n khÃ­ má»m hoáº·c khÃ­ tá»‰nh (5â€“10â€™)",
    "Váº½ tranh / máº·c Ä‘áº¹p / ngá»“i tÄ©nh giá»¯a khÃ´ng gian Ä‘áº¹p (15â€“30â€™)",
    "Uá»‘ng nÆ°á»›c Ã©p / rÆ°á»£u trÃ¡i cÃ¢y (100â€“200ml)",
    "Luyá»‡n giá»ng áº¥m (5â€“10 phÃºt, buá»•i sÃ¡ng hoáº·c tá»‘i)",
    "Äá»c truyá»‡n / bÃ i phÃ¢n tÃ­ch sÃ¢u (30â€“60â€™)",
    "Thu tháº­p 1â€“3 máº«u / content má»›i Ä‘á»ƒ náº¡p pattern (15â€“30â€™)",
    "Nghe / Ä‘á»c tÃ i chÃ­nh â€“ dÃ²ng tiá»n (15â€“45â€™)",
    "LÃ m 1 láº§n â€œdata hÃ³aâ€ â€“ sÆ¡ Ä‘á»“ â€“ há»‡ hÃ³a 1 chá»§ Ä‘á» Ä‘ang há»c (tá»‘i Ä‘a 45â€™)",
    "Quan sÃ¡t 1 nhÃ¢n váº­t / case ngÆ°á»i trong ngÃ y â†’ phÃ¢n tÃ­ch khÃ­ táº§ng",
    "Váº­n Ä‘á»™ng nháº¹ / bÆ¡i / Ä‘i bá»™ / vÆ°Æ¡n cÄƒng 10â€“20 phÃºt",
    "Ä‚n 1 bá»¯a ngon cÃ³ tá»‰nh khÃ­",
    "Uá»‘ng Ä‘á»§ nÆ°á»›c áº¥m â€” khÃ´ng uá»‘ng láº¡nh sau 21h",
    "TrÃ¡nh giÃ³ â€“ láº¡nh â€“ Ã¢m khÃ­ trá»±c tiáº¿p khi má»‡t"
  ],
  theDuc: [
    "KÃ©o giÃ£n nháº¹ sau khi ngá»§ dáº­y (5 phÃºt)",
    "Äi bá»™ hoáº·c di chuyá»ƒn cÆ¡ thá»ƒ 15â€“30 phÃºt (trÃ¡nh ngá»“i lÃ¬)",
    "VÆ°Æ¡n vai, xoay cá»•, gáº­p ngÆ°á»i 2 láº§n/ngÃ y (sÃ¡ng â€“ tá»‘i)",
    "Giá»¯ tháº³ng cá»™t sá»‘ng khi ngá»“i há»c/lÃ m (Ã½ thá»©c chá»‰nh)",
    "Xoa bá»¥ng theo chiá»u kim Ä‘á»“ng há»“ sau Äƒn (1 phÃºt)",
    "Nháº¹ nhÃ ng bÃ³p chÃ¢n â€“ cá»• chÃ¢n trÆ°á»›c khi ngá»§"
  ]
};

const storySnippets = {
  chamCoThe: ["Giá»t nÆ°á»›c áº¥m trÆ°á»£t xuá»‘ng, cÆ¡ thá»ƒ nhÆ° thá»Ÿ Ä‘Æ°á»£c.", "LÃ n da nhÆ° Ä‘Æ°á»£c Ä‘Ã¡nh thá»©c."],
  chamNhaCua: ["GÃ³c phÃ²ng sÃ¡ng hÆ¡n khi Ä‘á»“ váº­t náº±m Ä‘Ãºng chá»—."],
  dinhDuong: ["CÆ¡ thá»ƒ Ä‘Æ°á»£c náº¡p nÄƒng lÆ°á»£ng tÆ°Æ¡i má»›i."],
  langPhi: ["Báº¡n nháº­n ra thá»i gian quÃ½ giÃ¡ hÆ¡n."],
  aura: ["KhÃ´ng gian quanh báº¡n nhÆ° láº¥p lÃ¡nh hÆ¡n."],
  soThich: ["TÃ¢m trÃ­ thÆ° thÃ¡i khi lÃ m Ä‘iá»u mÃ¬nh thÃ­ch."],
  theDuc: ["MÃ¡u huyáº¿t lÆ°u thÃ´ng kháº¯p cÆ¡ thá»ƒ."]
};

const milestoneSnippets = {
  chamCoThe: "CÆ¡ thá»ƒ nÃ y nhÆ° vá»«a Ä‘Æ°á»£c reset â€“ sáº¡ch, áº¥m, sáºµn sÃ ng.",
  chamNhaCua: "CÄƒn phÃ²ng khÃ´ng cÃ²n lÃ  nÆ¡i báº¡n á»Ÿ â€“ mÃ  lÃ  nÆ¡i báº¡n thuá»™c vá».",
  dinhDuong: "NÄƒng lÆ°á»£ng trÃ n Ä‘áº§y tá»« nhá»¯ng bá»¯a Äƒn lÃ nh máº¡nh.",
  langPhi: "Báº¡n Ä‘Ã£ kiá»ƒm soÃ¡t tá»‘t nguá»“n nÄƒng lÆ°á»£ng cá»§a mÃ¬nh.",
  aura: "KhÃ­ cháº¥t toáº£ ra nháº¹ nhÃ ng quanh báº¡n.",
  soThich: "Nguá»“n cáº£m há»©ng dá»“i dÃ o lan toáº£.",
  theDuc: "CÆ¡ thá»ƒ dáº»o dai vÃ  linh hoáº¡t hÆ¡n."
};

const stats = { energy: 50, mood: 50, aura: 50 };

const groupSelect = document.getElementById('groupSelect');
const checklistDiv = document.getElementById('checklist');
const snippetDiv = document.getElementById('snippet');
const modal = document.getElementById('milestoneModal');
const milestoneText = document.getElementById('milestoneText');
document.getElementById('closeModal').addEventListener('click',()=>modal.classList.add('hidden'));

function loadStats(){
  const saved = localStorage.getItem('simStats');
  if(saved){
    const s = JSON.parse(saved);
    stats.energy = s.energy; stats.mood = s.mood; stats.aura = s.aura;
  }
  updateBars();
}

function saveStats(){
  localStorage.setItem('simStats', JSON.stringify(stats));
}

function updateBars(){
  document.getElementById('energyBar').style.width = stats.energy + '%';
  document.getElementById('moodBar').style.width = stats.mood + '%';
  document.getElementById('auraBar').style.width = stats.aura + '%';
}

const checklistValues = {};
Object.keys(checklistData).forEach(g=>{
  checklistData[g].forEach(item=>{
    const t=item.toLowerCase();
    const val={energy:0,mood:0,aura:0};
    if(/táº¯m|uá»‘ng|Ä‘i bá»™|bÆ¡i|kÃ©o|vÆ°Æ¡n|gáº­p|táº­p/.test(t)) val.energy+=10;
    else if(/dÆ°á»¡ng|cháº£i|rá»­a|Ä‘Ã¡nh rÄƒng|xoa|thoa/.test(t)) val.energy+=5;
    else if(/Ä‘á»• rÃ¡c|quÃ©t|dá»n/.test(t)) val.energy-=5;
    if(g==='aura') val.aura+=5;
    if(g==='soThich') val.mood+=5;
    checklistValues[item]=val;
  });
});

let currentGroup='';
let currentValues=[];

groupSelect.addEventListener('change',()=>{
  currentGroup=groupSelect.value;
  loadChecklist();
});

function loadChecklist(){
  checklistDiv.innerHTML='';
  snippetDiv.textContent='';
  if(!currentGroup) return;
  const items=checklistData[currentGroup];
  currentValues=JSON.parse(localStorage.getItem('progress_'+currentGroup)||'[]');
  if(currentValues.length!==items.length) currentValues=items.map(()=>false);
  items.forEach((item,idx)=>{
    const label=document.createElement('label');
    const cb=document.createElement('input');
    cb.type='checkbox';
    cb.checked=currentValues[idx];
    if(cb.checked) label.classList.add('checked');
    cb.addEventListener('change',()=>toggleItem(idx,item,label,cb));
    label.appendChild(cb); label.append(' '+item);
    checklistDiv.appendChild(label);
  });
}

function fadeSnippet(text){
  snippetDiv.style.opacity=0;
  setTimeout(()=>{snippetDiv.textContent=text; snippetDiv.style.opacity=1;},50);
}

function toggleItem(idx,item,label,cb){
  currentValues[idx]=cb.checked;
  label.classList.toggle('checked',cb.checked);
  localStorage.setItem('progress_'+currentGroup, JSON.stringify(currentValues));
  const val=checklistValues[item];
  if(cb.checked){
    stats.energy=Math.min(100,stats.energy+val.energy);
    stats.mood=Math.min(100,stats.mood+val.mood);
    stats.aura=Math.min(100,stats.aura+val.aura);
    fadeSnippet(storySnippets[currentGroup][Math.floor(Math.random()*storySnippets[currentGroup].length)]||'');
  }else{
    stats.energy=Math.max(0,stats.energy-val.energy);
    stats.mood=Math.max(0,stats.mood-val.mood);
    stats.aura=Math.max(0,stats.aura-val.aura);
  }
  saveStats();
  updateBars();
  checkMilestone();
}

function checkMilestone(){
  if(currentValues.every(v=>v)){
    milestoneText.textContent=milestoneSnippets[currentGroup];
    modal.classList.remove('hidden');
  }
}

loadStats();
})();
</script>
</body>
</html>
